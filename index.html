<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>PHP Notes</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    <link rel="stylesheet" href="./base.css">
</head>

<body>
<header class="section">
    <div class="container">
        <h1 class="title is-1">Notes for <a href="#start-basics">Start Basics</a>, <a href="#php">PHP</a> and  <a href="#symfony">Symfony</a>
        </h1>
    </div>
</header>
<article class="message" id="success">
    <div class="message-header"></div>
</article>
<nav class="section">
    <div class="container">
        <h4 class="title is-4">Table of Content</h4>
        <div class="columns">
            <div class="column">
                <button class="accordion">Start Basics</button>
                <div class="panel">
                    <div class="content">
                        <ul>
                            <li><a href="#web-server">Built-in PHP web server </a></li>
                            <li><a href="#authentication">Authentication</a></li>
                            <li><a href="#authorization">Authorization</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="column">
                <button class="accordion">PHP</button>
                <div class="panel">
                    <div class="content">
                        <ul>
                            <li><a href="#basic-php">Basics</a></li>
                            <li><a href="#oop">OOP</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="column">
                <button class="accordion">Symfony</button>
                <div class="panel">
                    <div class="content">
                        <ul>
                            <li><a href="#symfony-basics">Basics</a></li>
                            <li><a href="#controller">Controller and Routing</a></li>
                            <li><a href="#flex">Flex</a></li>
                            <li><a href="#doctrine">Doctrine</a></li>
                            <li><a href="#stofDoctrineExtensionsBundle">The StofDoctrineExtensionsBundle</a></li>
                            <li><a href="#makerBundle">MakerBundle</a></li>
                            <li><a href="#twig">Twig</a></li>
                            <li><a href="#services">Services</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>
<main class="scrolling-box">
    <button onclick="scrollToTop()" id="toTop" class="button is-primary">To Top!</button>
    <section class="section">
        <div class="container">
            <div class="heading-box">
                <h2 class="title is-2" id="start-basics">Start Basics</h2>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <div class="heading-box">
                <h3 class="title is-3" id="web-server"><strong>Built-in PHP web server </strong></h3>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Start the web server</p>
                    <div class="notification">php -S localhost:8000</div>
                </div>
            </div>

            <div class="heading-box">
                <h3 class="title is-3" id="authentication"><strong>Authentication</strong></h3>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Find out who a user is, and make the user prove who he is. Can be described as the login process.</p>
                </div>
            </div>
            <div class="heading-box">
                <h3 class="title is-3" id="authorization"><strong>Authorization</strong></h3>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Just because a user got Authenticated (the user proved who he is), doesn't mean he is allowed to see all the content that is on our application. Therefore a user needs to be checked if he has access to different content. This is done by Authorization. </p>
                </div>
            </div>


            <!-- <h3 class="title is-3" id="#"></h3>
            <div class="section-content">
                <div class="content">
                    <p></p>
                    <div class="notification"></div>
                </div>
            </div> -->
        </div>
    </section>
    <section class="section">
        <div class="container">
            <div class="heading-box">
                <h2 class="title is-2" id="php">PHP</h2>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <div class="heading-box">
                <h3 class="title is-3" id="basic-php">Basics</h3>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Start a new PHP file</p>
                    <div class="message is-info ">
                        <div class="message-header">
                            Start a new PHP file
                        </div>
                        <div class="message-body is-family-code">
                            &lt;?php
                        </div>
                    </div>
                    <p>To get access to functionality from a different file, require that other file in your current file:</p>
                    <div class="message is-info ">
                        <div class="message-header">
                            Require an external file
                        </div>
                        <div class="message-body is-family-code">
                            require __DIR__.'/FileName.php';
                        </div>
                    </div>
                    <p>To get the directory of a file use:</p>
                    <div class="message is-info ">
                        <div class="message-header">
                            The directory of a file
                        </div>
                        <div class="message-body is-family-code">
                            __DIR__
                        </div>
                    </div>
                </div>
            </div>
            <div class="heading-box">
                <h3 class="title is-3" id="oop">OOP</h3>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <div class="section-content">
                <div class="content">
                    <h4 class="title is-4">Classes</h4>
                    <p>A class can be seen as a template for <a href="#objects">objects</a> and is defined as followed:</p>
                    <div class="message is-info ">
                        <div class="message-header">
                            Syntax
                        </div>
                        <div class="message-body is-family-code">
                            class ClassName { <br>
                            <br>
                            }
                        </div>
                    </div>
                    <div class="message is-dark">
                        <div class="message-header">
                            Example: Creating a class named Person
                        </div>
                        <div class="message-body is-family-code">
                            class Person { <br>
                            <br>
                            }
                        </div>
                    </div>
                    <p>A class name should be written in UppercaseCamelCase. A good practice is to have one class in each file and name the file the same as the class.</p>

                    <h5 class="title is-5">Properties</h5>
                    <p>A class can hold different properties. These can be seen as the characteristics of the class.</p>
                    <div class="message is-dark">
                        <div class="message-header">
                            Example: Class with properties
                        </div>
                        <div class="message-body is-family-code">
                            class Person { <br><br>
                            <span class="ml-20">public $name;</span><br>
                            <span class="ml-20">public $lastName;</span><br>
                            <span class="ml-20">public $age;</span><br>
                            <br>
                            }
                        </div>
                    </div>
                    <div class="heading-box">
                        <h4 class="title is-4" id="objects">Objects</h4>
                        <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
                    </div>
                    <p>After defining a class it's possible to instantiate one or more objects from that class. </p>
                    <div class="message is-info ">
                        <div class="message-header">
                            Syntax: Instantiate an Object
                        </div>
                        <div class="message-body is-family-code">
                            $newObject = new ClassName();
                        </div>
                    </div>
                    <div class="message is-dark">
                        <div class="message-header">
                            Example: Instantiate an Object from the class 'Person' and save it to the variable $myFriend
                        </div>
                        <div class="message-body is-family-code">
                            $myFried = new Person(); <span class="is-italic has-text-weight-light">//One object saved into the variable $myFriend</span><br>
                            $myMom = new Person(); <span class="is-italic has-text-weight-light">//Another object saved into the variable $myMom</span>
                        </div>
                    </div>
                    <p>So if a class can be seen as a template, an instance of a class (also called object) can be seen as a copy of the template. It's even possible to make more than one instance of the class like it's possible to reuse a  normal template. After instantiating a class, the template can be filled with unique data that describes exactly that one object.  In the case above the class contains the property's $name, $lastName and $age. These can be filled with data for the new $myFried object as followed:</p>
                    <div class="message is-dark">
                        <div class="message-header">
                            Example: Set data on the new object
                        </div>
                        <div class="message-body is-family-code">
                            $myFriend->name = 'Lucas'; <br>
                            $myFriend->lastName = 'Bloom'; <br>
                            $myFriend->age = 30;
                        </div>
                    </div>
                    <div class="message is-dark">
                        <div class="message-header">
                            Example: Access the data saved on the object saved in $myFried
                        </div>
                        <div class="message-body is-family-code">
                            echo $myFriend->name . ' is ' . $myFriend->age = 30 . ' years old!';
                        </div>
                        <div class="message-footer">
                            prints: Lucas is 30 years old!
                        </div>
                    </div>
                    <h5 class="title is-5">Methods</h5>
                    <p>Classes can also hold methods. Every object instantiated from the class can use these methods. A method is defined as followed:</p>
                    <div class="message is-info ">
                        <div class="message-header">
                            Syntax
                        </div>
                        <div class="message-body is-family-code">
                            class ClassName { <br>
                            <br>
                                <span class="ml-20">public function methodName(&lt;parameterOne&gt, &lt;parameterTwo&gt){ <br> </span>
                                <span class="ml-40">//DO SOMETHING</span> <br>
                            <span class="ml-20">}</span> <br><br>
                            }
                        </div>
                    </div>
                    <p>In the example beneath the class  'Person' now contains a method. Inside methods, is it possible to access properties that are defined in the class by using the keyword $this.</p>
                    <div class="message is-dark">
                        <div class="message-header">
                            Example: Class with properties and one method that prints the full name of the object
                        </div>
                        <div class="message-body is-family-code">
                            class Person { <br>
                            <br>
                            <span class="ml-20">public $name;</span><br>
                            <span class="ml-20">public $lastName;</span><br>
                            <span class="ml-20">public $age;</span><br><br>

                            <span class="ml-20">public function printFullName(&lt;parameterOne&gt, &lt;parameterTwo&gt){ <br> </span>
                            <span class="ml-40">print $this->name . ' ' .  $this->lastName;</span> <br>
                            <span class="ml-20">}</span> <br><br>
                            }
                        </div>
                    </div>
                    <div class="message is-dark">
                        <div class="message-header">
                            Example: Access a method on an object
                        </div>
                        <div class="message-body is-family-code">
                            $myFriend->printFullName();
                        </div>
                        <div class="message-footer">
                            prints: Lucas Bloom
                        </div>
                    </div>
                    <h5 class="title is-5">The variable: $this</h5>
                    <p>Inside a method, we have access to the special variable $this. Before we saw that it is possible to instantiate more than one object from a class, we also saw that it's possible to call a function on an object. We also saw that every new object has access to the properties that are defined in the class (in this example, $name, $lastName, and $age). When a method get's called on an object ($myFriend->printFullName()), the variable $this gets available inside the method printFullName().  The variable $this points to /references the object that called the method (in this case the variable $myFriend and not $myMom). So if we call $myFriend->printFullName() than inside printFullName(), $this will be the $myFriend object, but if you call $myMom->printFullName() than it will be the $myMom object.
                    So $this variable inside Class always refers to the object from which the method was called.</p>
                    <h5 class="title is-5">Visibility modifier</h5>
                    <p>The modifiers are used to Restrict access to properties and methods outside a class. There exsists three visibility modifiers Public, Private, and Protected. </p>
                    <div class="message is-info ">
                        <div class="message-header">
                            Public
                        </div>
                        <div class="message-body is-family-code">
                            class ClassName { <br>
                            <br>
                            <span class="ml-20">public $myProperty;</span><span class="is-italic has-text-weight-light">//Property is accessible everywhere.</span><br>
                            <br>
                            }
                        </div>
                    </div>
                    <div class="message is-info ">
                        <div class="message-header">
                            Private
                        </div>
                        <div class="message-body is-family-code">
                            class ClassName { <br>
                            <br>
                            <span class="ml-20">private $myProperty; </span> <span class="is-italic has-text-weight-light">//Property is only accessible inside its class.</span><br>
                            <br>
                            }
                        </div>
                    </div>
                    <div class="message is-info">
                        <div class="message-header">
                            Protected
                        </div>
                        <div class="message-body is-family-code">
                            class ClassName { <br>
                            <br>
                            <span class="ml-20">protected $myPropert;</span> <span class="is-italic has-text-weight-light">//Provides access to the property in every class that inherits from the class where the property is defined.</span><br>
                            <br>
                            }
                        </div>
                    </div>
                    <h5 class="title is-5">Getter and Setter</h5>
                    <p>To make it possible to interact with a private property two public methods are needed, one to set the property (setter) and one to get the property (getter).</p>
                    <p>Inside the setter method, it's then possible to restrict/control that the right value gets set on the property. It could, for instance, be possible to check if a string is set on a property named 'name' instead of a number.
                        Inside a getter method, it's possible to control how the property is 'delivered'. For instance, the method could always make sure that the name has its first letter in uppercase. </p>
                    <div class="message is-dark">
                        <div class="message-header">
                            Public
                        </div>
                        <div class="message-body is-family-code">
                            class Person { <br>
                            <br>
                            <span class="ml-20">private $name; </span><br>
                            <br>
                            <span class="ml-20">public function setName(string $name){</span><br>
                            <span class="ml-40">$this->name = $name; </span><br>
                            <span class="ml-20">} </span><br>
                            <br>
                            <span class="ml-20">public function getName(){</span><br>
                            <span class="ml-40">return ucfirst($this->name); </span><br>
                            <span class="ml-20">} </span><br>
                            }
                        </div>
                    </div>
                    <h5 class="title is-5">Type Hint</h5>
                    <p>The purpose of type hint in PHP ist to get better errors.  Another benefit is that autocompleting is offered on parameters that got type hinted. Not only objects can be type hinted, but also integers, arrays, strings, and booleans (in general, all types that are in PHP).</p>
                    <div class="message is-dark">
                        <div class="message-header">
                            Type Hint
                        </div>
                        <div class="message-body is-family-code">
                            function getCharacteristics(Person $person) :array { <span class="is-italic has-text-weight-light">//There the class Person was type hinted</span><br>
                            <br>
                            <span class="ml-20">return [</span><br>
                            <span class="ml-40">'name' => $this->getName() .  ' ' . $this->getLastName(); </span><br>
                            <span class="ml-40">'age' => $this->getAge(); </span><br>
                            <span class="ml-20">];</span><br>
                            }
                        </div>
                    </div>
                    <h5 class="title is-5">Constructor</h5>
                    <p>Whenever a new object is instantiated a unique method is called. This method is called the constructor and looks like this:</p>
                    <div class="message is-info">
                        <div class="message-header">
                            __construct
                        </div>
                        <div class="message-body is-family-code">
                            class Person { <br>
                            <br>
                            <span class="ml-20">public function __construct(){</span><br>
                            <span class="ml-20">} </span><br>
                            <br>
                            }
                        </div>
                    </div>
                    <p>So every time we call 'new Person()' - this unique method is called. Inside the method, we can do everything we can do in a 'normal' method, and it's also possible to pass parameters to the method. Let's see an example: </p>                <div class="message is-dark">
                    <div class="message is-black">
                        <div class="message-header">
                            Example: __construct (with paramenters)
                        </div>
                        <div class="message-body is-family-code">
                            class Person { <br>
                            <br>
                            <span class="ml-20">private $name; </span><br>
                            <br>
                            <span class="ml-20">public function __construct(string $name){</span><br>
                            <span class="ml-40">$this->name = $name; </span><br>
                            <span class="ml-20">} </span><br>
                            <br>
                            }
                            <br>
                            <br>
                            $person = new Person('Carl');  <span class="is-italic has-text-weight-light">//Because the constructor has a parameter, we need to pass an argument to the constructor while instantiating the object Person. </span><br>
                            <br>
                        </div>
                    </div>
                    <p>If the constructor is not defined, it is still called in the background without doing anything than instantiate the object. </p>
                </div>
            </div>
        </div>
        </div>
    </section>
    <section class="section">
        <div class="container">
            <div class="heading-box">
                <h2 class="title is-2" id="symfony">Symfony</h2>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <div class="heading-box">
                <h3 class="title is-3" id="symfony-basics"><strong>Basics</strong></h3>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Start a new Symfony projcet:</p>
                    <div class="notification">composer create-project symfony/skeleton <i>project-name</i></div>
                    <p class="ml-20">A new symfony project does not come with a git repository just add one with the command '<i>git init'</i>, and remember to add <i>/'.idea/'</i>
                        to the <i>.gitignore</i> if you use phpstorm. </p>
                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Installing a Server:</p>
                    <div class="notification">composer require server</div>
                    <p class="ml-20"> Run the Server:</p>
                    <div class="notification ml-20">php ./bin/console server:run</div>

                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Get a list of all of the bin/console commands (if you add new commands to the src/console directory these will also show up here):</p>
                    <div class="notification">php ./bin/console</div>
                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Get a list of all Symfony Container Services:</p>
                    <div class="notification">php bin/console debug:container</div>
                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Get a list of all of the available types that can be used for autowiring:</p>
                    <div class="notification">php bin/console debug:autowiring</div>
                </div>
            </div>

            <div class="heading-box">
                <h3 class="title is-3" id="controller"><strong>Controller and Routing</strong></h3>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <h5 class="title is-5">About</h5>
            <div class="section-content">
                <div class="content">
                   <p>Route: Configuration that defines the url for a page.</p>
                   <p>Controller: Has methods where the content for a specific route is defined.</p>
                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>To use routes with annotations we need to install annotations first.</p>
                    <p>Install annotations:</p>
                    <div class="notification">composer require annotations</div>
                    <p class="ml-20">Annotations are PHP comments that are interpreted as configuration instead of a comment. </p>
                </div>
                <div class="message is-black">
                    <div class="message-header">
                        Example: Controller with routing using annotations
                    </div>
                    <div class="message-body is-family-code">
                        namespace App\Controller;<br><br>
                        use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;<br>
                        use Symfony\Component\HttpFoundation\Response;<br>
                        use Symfony\Component\Routing\Annotation\Route;<br><br>

                        class PersonController extends AbstractController { <br>
                        <br>
                        <span class="ml-20">/**</span><br>
                        <span class="ml-20">* @Route("/admin/persons/new")</span><br>
                        <span class="ml-20">*/</span><br>
                        <span class="ml-20">public function new(){</span><br>
                        <span class="ml-40">return new Response('Insert new Person');</span><br>
                        <span class="ml-20">} </span><br>
                        <br>
                        }
                    </div>
                </div>
                <p class="ml-20">Inside a method in a controller, we can do more or less everything we want, query the database, make an API call or render a template. The only thing the is needed is: <strong>the controller must return a Symfony Response object.</strong></p>
            </div>
            <h5 class="title is-5">Routes with wildcards</h5>
            <div class="section-content">
                <p>To make it possible to visit each person on a website with each a different id, we can use a wildcard. Wildcards are written in {} in the route. The wildcard is then available as an argument in the method.  </p>
                <div class="message is-black">
                    <div class="message-header">
                        Example: Routing using a wildcard
                    </div>
                    <div class="message-body is-family-code">
                        namespace App\Controller;<br><br>
                        use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;<br>
                        use Symfony\Component\HttpFoundation\Response;<br>
                        use Symfony\Component\Routing\Annotation\Route;<br><br>

                        class PersonController extends AbstractController { <br>
                        <br>
                        <span class="ml-20">/**</span><br>
                        <span class="ml-20">* @Route("/persons/{id}")</span><br>
                        <span class="ml-20">*/</span><br>
                        <span class="ml-20">public function show($id){</span><br>
                        <span class="ml-40">return new Response('Person with id: ' . $id);</span><br>
                        <span class="ml-20">} </span><br>
                        <br>
                        }
                    </div>
                </div>
            </div>

            <div class="heading-box">
                <h3 class="title is-3" id="flex"><strong>Flex</strong></h3>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <h5 class="title is-5">About</h5>
            <div class="section-content">
                <div class="content">
                    <p>Flex is Composer pugin, and it helps you manage Symfony applications. Flex is built on Symfony Recipes. Symfony Recipies are a set of automated instructions that helps you integrate third-party packages into an existing Symfony application <a href="https://flex.symfony.com/" target="_blank">https://flex.symfony.com/</a>.</p>
                    <p>Flex comes with an alias system, that allows you to use aliases when installing a new Symfony recipe. You browse all recipes on the webseite listed above.</p>
                    <p>Symfony comes with Flex and should already be listed in the composer.jsson file</p>
                    <div class="message is-black">
                        <div class="message-header">
                            Example: composer.json file with flex
                        </div>
                        <div class="message-body is-family-code">
                            {<br>
                            <span class="ml-20">"require": {</span><br>
                                <span class="ml-40">...,</span><br>
                                <span class="ml-40">"symfony/flex": "^1.0",</span><br>
                                <span class="ml-40">...,</span><br>
                            <span class="ml-20">}, </span><br>
                            <span class="ml-20">...,</span><br>
                            }
                        </div>
                    </div>
                    <p>When we update require a new recipe or package, 3 main files get updated. The composer.json and composer.lock, but also the symfony.lock file gets updated. Sometimes, we also get a new config file that makes it possible to configure the new package.</p>
                    <p>So what Flex does is to execute the recipe from the package that was required. Recipes can add configuration files, modify files (like the .gitignore file) or create directories. So Flex makes it possible to use a new package instantly without any extra setup.</p>
                </div>
            </div>

            <div class="heading-box">
                <h3 class="title is-3" id="doctrine"><strong>Doctrine</strong></h3>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <h5 class="title is-5">About</h5>
            <div class="section-content">
                <div class="content">
                    <p>Doctrine is an ORM ( Object Relational Mapper). That means doctrine can automatically transfer data stored in a relational database table (like Maria Database) into objects.
                        So if we need a table with persons, we would need to create a class called person.</p>
                </div>
            </div>
            <h5 class="title is-5">Install and Usage</h5>
            <div class="section-content">
                <div class="content">
                    <p>Install Doctine:</p>
                    <div class="notification">composer require doctrine</div>
                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Setting up the database in the .env file:</p>
                    <div class="notification">DATABASE_URL=mysql://db_user:db_password@127.0.0.1:3306/db_name</div>
                </div>
                <div class="content ml-40">
                    <p>If you don't use a password on the database, leave the db_password empty. Like this:</p>
                    <div class="notification">DATABASE_URL=mysql://db_user:@127.0.0.1:3306/db_name</div>
                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Create the database:</p>
                    <div class="notification">php bin/console doctrine:database:create</div>
                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Create a migration:</p>
                    <div class="notification">php bin/console make:migration</div>
                    <p class="ml-20">The command generates a new file in the folder Migrations. The file contains the SQL command that will be executed when the migrations is migrated. Tipp: Always check the file to see if the SQL command is what you want to execute</p>
                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Run the migration files:</p>
                    <div class="notification">php bin/console doctrine:migrations:migrate</div>
                    <p class="ml-20">The first time the migration is migrated, a new table is added to the database. Every migration is stored as an entry inside this table, and this makes it possible for Doctrine to detect if any changes have occurred since the last migration.</p>
                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>See the status of the migrations:</p>
                    <div class="notification">php bin/console doctrine:migrations:status</div>
                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>See the changes that will be made in the datebase after changing anything in yaml files or the entetiy (if you work with annotations):
                    (This has nothing to do with the migraitons.)</p>
                    <div class="notification">php bin/console doctrine:schema:update --dump-sql</div>
                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Execute the changes. (This has nothing to do with the migraitons.)</p>
                    <div class="notification">php bin/console doctrine:schema:update --dump-sql --force</div>
                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Doctrine annotations reference: (Here you can find all the annotations that can be used with doctrine)</p>
                    <div class="notification"><a href="https://www.doctrine-project.org/projects/doctrine-orm/en/2.7/reference/annotations-reference.html">www.doctrine-project.org/projects/doctrine-orm/en/2.7/reference/annotations-reference.html</a></div>
                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>See the entires in the database:</p>
                    <div class="notification">php bin/console doctrine:query:sql "SELECT * FROM person"</div>
                    <p class="ml-20">Note that the classnames are converted into snake case in the database</p>
                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Delete an entire table and it's records</p>
                    <div class="notification">php bin/console doctrine:query:sql "TRUNCATE TABLE table_name"</div>
                </div>
            </div>

            <h5 class="title is-5">Save Entities</h5>
            <div class="section-content">
                <div class="content">
                    <p>To persist an entity to the database, we need to use a service from Doctrine. In this case, its the EntitiyManagerInterface. This service gives us the methods 'persist($entity)' and 'flush()'. 'persist($entity)' says - this entity is ready to be saved, but it's not yet saved. We can run this method on many entities and then use 'flush()'. 'flush()' make sure the entity or entities get saved into the database.  The to step system was made to optimize savings onto the database.</p>
                    <div class="message is-black">
                        <div class="message-header">
                            Example: Persisting an entity inside a Controller
                        </div>
                        <div class="message-body is-family-code">
                            namespace App\Controller;<br><br>
                            use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;<br>
                            use Symfony\Component\HttpFoundation\Response;<br>
                            use Symfony\Component\Routing\Annotation\Route;<br>
                            use Doctrine\ORM\EntityManagerInterface;<br><br>

                            class PersonController extends AbstractController { <br>
                            <br>
                            <span class="ml-20">/**</span><br>
                            <span class="ml-20">* @Route("/admin/person/new")</span><br>
                            <span class="ml-20">*/</span><br>
                            <span class="ml-20">public function new(EntityManagerInterface $em){</span> <span class="is-italic has-text-weight-light">//EntityManagerInterface is type hinted</span><br>
                            <span class="ml-40">$person = new Person():</span><br>
                            <span class="ml-40">$person->setName('Hans');</span><br><br>

                            <span class="ml-40">$em->persist($person)</span> <span class="is-italic has-text-weight-light">//Entity is ready to be saved</span> <br>
                            <span class="ml-40">$em->flush()</span> <span class="is-italic has-text-weight-light">//Entity is saved</span><br><br>
                            <span class="ml-40">return new Response(sprintf(
                                        'Hiya! New Person id: #%d named: %s',</span><br>
                                <span class="ml-60"> $person->getId(),</span><br>
                                <span class="ml-60"> $person->getName()</span><br>
                                <span class="ml-40">));</span><br>
                            <span class="ml-20">} </span><br>
                            <br>
                            }

                        </div>
                    </div>
                </div>
            </div>
            <h5 class="title is-5">Querying for Data</h5>
            <div class="section-content">
                <div class="content">
                    <ol>
                        <li class="ml-20">The first step ist to get the repository of the entity, here the service von Doctrine (EntityManagerInterface) is needed agin.
                            (If you used the maker bundle to create your entity the repository automatically created).</li>
                        <li class="ml-20">The repository gives you a lot of "out of the box" functions like "find()", "findOneBy()" or "getAll()".</li>
                    </ol>
                    <div class="message is-black">
                        <div class="message-header">
                            Example: Querying the Database
                        </div>
                        <div class="message-body is-family-code">
                            namespace App\Controller;<br><br>
                            use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;<br>
                            use Symfony\Component\HttpFoundation\Response;<br>
                            use Symfony\Component\Routing\Annotation\Route;<br>
                            use Doctrine\ORM\EntityManagerInterface;<br><br>

                            class PersonController extends AbstractController { <br>
                            <br>
                            <span class="ml-20">/**</span><br>
                            <span class="ml-20">* @Route("/persons/{name}")</span><br>
                            <span class="ml-20">*/</span><br>
                            <span class="ml-20">public function show($name, EntityManagerInterface $em){</span> <br>
                                <span class="ml-40">$repository = $em->getRepository(Person::class);</span><br>
                                <span class="ml-40"> /** @var Person $person */</span><br>
                                <span class="ml-40"> $person = $repository->findOneBy(['name' => $name]);</span><br><br>

                                <span class="ml-40">//if Hans is not found throw an 404 error</span> <br>
                                <span class="ml-40">if (!$person) {</span> <br>
                                    <span class="ml-60">throw $this->createNotFoundException(sprintf('No Person with the name: "%s"', $name)));</span><br>
                                <span class="ml-40">}</span><br><br>

                                <span class="ml-40">return $this->render('person/show.html.twig', [ </span><br>
                                         <span class="ml-60">'person' => $person,</span><br>
                                <span class="ml-40">]);</span><br>
                            <span class="ml-20">} </span><br>
                            <br>
                            }
                        </div>
                    </div>
                    <p class="ml-20">The metod 'findOneBy()' fetches only one row from the database. In the example above where the name-field matches the value $name.</p>
                    <p class="ml-20">Then we query the Database with Doctrine objects are always returned. It's then possible to access the properties of the object like this:</p>
                    <div class="ml-20 notification">$person->getName();</div>
                    <p class="ml-20">In the example above, a Twig-Template is rendered. It is possible because we can use the 'render()' method that the AbsctractController implements, and we can access it with the key-word '$this.'  </p>
                    <p>NOTE: A repository is automatically registered as a service. Therefore it's possible to autowire a repository in a controller like any other service, and it's not necessary to use the EntityManagerInterface to fetch the repository:</p>
                    <div class="message is-black">
                        <div class="message-header">
                            Example: Autowire a repository
                        </div>
                        <div class="message-body is-family-code">
                            use use App\Repository\PersonRepository; <br><br>

                            class PersonController extends AbstractController{<br><br>
                            <span class="ml-20">public function show($name, PersonRepository $repository){</span> <br>
                            <br>
                            <span class="ml-40"> $person = $repository->findOneBy(['name' => $name]);</span><br>
                            <br>
                            <span class="ml-40">return $this->render('person/show.html.twig', [ </span><br>
                            <span class="ml-60">'person' => $person,</span><br>
                            <span class="ml-40">]);</span><br>
                            <br>
                            <span class="ml-20">} </span><br>
                            <br>
                            }
                        </div>
                    </div>
                </div>
            </div>

            <h5 class="title is-5">Custom Queries</h5>
            <div class="section-content">
                <div class="content">
                    <p>Doctrine has it's own SQL-like language: DQL (Doctrine Query Language). In DQL the Table names are the class names and the column names are the property names. </p>
                    <p>Custom queries can be written in a DQL string, or by using a query builder. The query builder creates DQL strings from different methods that can be chained to the query builder.</p>
                        <div class="message is-black">
                        <div class="message-header">
                            Example: Custom query
                        </div>
                        <div class="message-body is-family-code">
                            namespace App\Repository;<br><br>
                            use App\Entity\Person;<br>
                            use Doctrine\Bundle\DoctrineBundle\Repository\ServiceEntityRepository;<br>
                            use Symfony\Bridge\Doctrine\RegistryInterface;<br><br>

                            class PersonRepository extends ServiceEntityRepository { <br>
                            <br>
                            <span class="ml-20">/**</span><br>
                            <span class="ml-20">* @return Person[]</span><br>
                            <span class="ml-20">*/</span><br>
                            <span class="ml-20">public function findAllPersonsOrderedByNewest(){</span> <br><br>
                            <span class="ml-40">return $this->createQueryBuilder('p')</span><br>
                            <span class="ml-60">->andWhere('p.exampleField = :val')</span><br>
                            <span class="ml-60">->setParameter('val', $value)</span><br>
                            <span class="ml-60">->orderBy('p.id', 'ASC')</span><br>
                            <span class="ml-60">->setMaxResults(10)</span><br>
                            <span class="ml-60">->getQuery()</span><br>
                            <span class="ml-60">->getResult();</span><br>
                            <span class="ml-20">}</span>
                            <br>
                            }
                        </div>
                    </div>
                    <p>In the example above, the method 'andWhere()' is used. There is also a method called 'where()'. But using the 'where()' method, removes any previous 'where()' or 'andWhere()' methods. So it is safer only to use 'andWhere()'. </p>
                    <p>In the 'andWhere' method, you can see a ':', this indicates that the next word is the name of a placeholder. The value of the placeholder can be set via the method 'setPrameter()'. So in the example above :val is a placeholder. The name val is used in the method setParameter, with a dynamic value (in this cased saved in the variable $value=).</p>
                    <p>Get an array of results:</p>
                    <div class="notification">
                        ->getQuery() <br>
                        ->getResults();<br>
                    </div>
                    <p>Get one or null results</p>
                    <div class="notification">
                        ->getQuery() <br>
                        ->getOneOrNullResult();<br>
                    </div>
                </div>
            </div>

            <h5 class="title is-5">ParamConverter: Automatically Querying</h5>
            <div class="section-content">
                <div class="content">
                    <p>Doctrine has a Param Converter - this allows us to fetch a single entity without having to query the database our self. Just type-hint the entity that we need to found, and doctrine does work for us.
                        The only thing that has to match is the wildcard in the URL (/{id} or /{name}), and the property of the entity.
                        If an entity is not found, a 404-error is automatically thrown before the controller is called.
                        Read more here: <a href="https://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/converters.html" target="_blank">https://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/converters.html</a>
                    </p>
                    <div class="message is-black">
                        <div class="message-header">
                            Example: Param converter
                        </div>
                        <div class="message-body is-family-code">
                            <span class="ml-20">/**</span><br>
                            <span class="ml-20">* Fetch via primary key because {id} is in the route.</span><br>
                            <span class="ml-20">* </span><br>
                            <span class="ml-20">* @Route("/persons/{id}")</span><br>
                            <span class="ml-20">*/</span><br>
                            <span class="ml-20">public function showByPk(Person $person){</span> <br>
                            <span class="ml-20">}</span>
                            <br><br>
                            <span class="ml-20">/**</span><br>
                            <span class="ml-20">* Perform a findOneBy() where the name property matches {name}.</span><br>
                            <span class="ml-20">* </span><br>
                            <span class="ml-20">* @Route("/persons/{name}")</span><br>
                            <span class="ml-20">*/</span><br>
                            <span class="ml-20">public function show(Person $person){</span> <br>
                            <span class="ml-20">}</span><br>
                        </div>
                    </div>
                </div>
            </div>

            <h5 class="title is-5">Update entities</h5>
            <div class="section-content">
                <div class="content">
                    <p>If we want to update an existing entity, we only have to fall the method 'flush()' on the EntityManagerInterface.</p>
                    <div class="message is-black">
                        <div class="message-header">
                            Example: Update an entity
                        </div>
                        <div class="message-body is-family-code">
                            <span class="ml-20">public function updatePerson(Person $person, EntityManagerInterface $em){</span> <br>
                            <span class="ml-40">$person->setBirthyear(1983);</span><br>
                            <span class="ml-40">$em->flush();</span><br>
                            <span class="ml-20">}</span>
                            <br><br>
                        </div>
                    </div>
                </div>
            </div>

            <h5 class="title is-5">Doctrine Fixture Bundle</h5>
            <div class="section-content">
                <div class="content">
                    <p>Install:</p>
                    <div class="notification">composer require --dev orm-fixtures</div>
                </div>
                <div class="content">
                    <p>Make a new fixture class:</p>
                    <div class="notification">php bin/console make:fixtures</div>
                    <p class="ml-20">Name the fixture like your entity + Fixtures (PersonFixtures)</p>
                </div>
                <div class="content">
                    <p>Load the fixtures:</p>
                    <div class="notification">php bin/console doctrine:fixtures:load</div>
                    <p class="ml-20">IMPORTANT: this command empties the database before it loads the new data. DO NOT RUN THIS COMMAND IN PRODUCTION!</p>
                </div>
                <div class="content">
                    <p>Install Faker to generate fake content: <a href="https://github.com/fzaninotto/Faker" target="_blank">https://github.com/fzaninotto/Faker</a></p>
                    <div class="notification">composer require fzaninotto/faker --dev</div>
                    <div class="message is-black">
                        <div class="message-header">
                            Example: How to initialize Faker and genereate 10 rows in the database
                        </div>
                        <div class="message-body is-family-code">
                            use Faker\Generator; <br><br>
                            abstract class BaseFixture extends Fixture { <br><br>

                            <span class="ml-20">/** @var Generator */</span><br>
                            <span class="ml-20">protected $faker; </span><br>
                            <span class="ml-20">protected $manager; </span><br><br>
                            <span class="ml-20">public function load(ObjectManager $manager) {</span> <br>
                                <span class="ml-40">$this->faker = Factory::create();</span> <br>
                                <span class="ml-40">$this->manager = $manager;</span> <br>
                            <span class="ml-20">}</span>
                            <br><br>
                            }
                            <br><br>
                            class PersonFixtures extends BaseFixture {<br><br>

                            <span class="ml-20">public function loadData(ObjectManager $manager) {</span><br><br>
                                <span class="ml-40">$this->createMany(Person::class, 10, function(Person $person, $count) {</span><br>
                                    <span class="ml-60">$person->setCreatedAt($this->faker->dateTimeBetween('-100 days', '-1 days')</span> <br>
                                <span class="ml-40">});</span> <br>
                            <span class="ml-20">}</span>
                            <br><br>
                            }

                        </div>
                    </div>
                </div>
            </div>

            <!-- <h3 class="title is-3" id="#"></h3>
            <div class="section-content">
                <div class="content">
                    <p></p>
                    <div class="notification"></div>
                </div>
            </div> -->
            <div class="heading-box">
                <h3 class="title is-3" id="stofDoctrineExtensionsBundle"><strong>The StofDoctrineExtensionsBundle</strong></h3>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <h5 class="title is-5">Install and Usage</h5>
            <div class="section-content">
                <div class="content">
                    <p>Install: <a href="https://symfony.com/doc/current/bundles/StofDoctrineExtensionsBundle/index.html" target="_blank">https://symfony.com/doc/current/bundles/StofDoctrineExtensionsBundle/index.html</a></p>
                    <div class="notification">
                        composer require stof/doctrine-extensions-bundle
                    </div>
                    <p>Say yes to install the recipe, and enable the extension you want to use</p>
                </div>
                <div class="content">
                    <div class="message is-black">
                        <div class="message-header">
                            Example: Configrue to use timestamp and slugable <br><small>config/packages/stof_doctrine_extensions.yaml</small>
                        </div>
                        <div class="message-body is-family-code">
                            stof_doctrine_extensions: <br>
                            <span class="ml-20">default_locale: en_US</span> <br>
                            <span class="ml-20">orm:</span> <br>
                            <span class="ml-40">default:</span><br>
                            <span class="ml-60">timestampable: true</span><br>
                            <span class="ml-60">sluggable: true</span><br>
                        </div>
                    </div>

                    <div class="message is-black">
                        <div class="message-header">
                            Example: Use timestamp and slugable in the Entity
                        </div>
                        <div class="message-body is-family-code">
                            use Gedmo\Mapping\Annotation as Gedmo;<br>
                            use Gedmo\Timestampable\Traits\TimestampableEntity; <br><br>

                            class Person { <br><br>
                            <span class="ml-20">use TimestampableEntity;</span> <br><br>

                            <span class="ml-20">/**</span> <br>
                            <span class="ml-20">* @ORM\Column(type="string", length=100, unique=true)</span> <br>
                            <span class="ml-20">* @Gedmo\Slug(fields={"title"})</span> <br>
                            <span class="ml-20">*/</span> <br>
                            <span class="ml-20">private $slug;</span> <br>

                        </div>
                    </div>
                </div>
            </div>

            <div class="heading-box">
                <h3 class="title is-3" id="makerBundle"><strong>The Symfony MakerBundle</strong></h3>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <h5 class="title is-5">Install and Usage</h5>
            <div class="section-content">
                <div class="content">
                    <p>Install:</p>
                    <div class="notification">
                        composer require symfony/maker-bundle --dev
                    </div>
                </div>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>Create a new entity: (This command creates a new class in a directory called Entity and a corresponding repository class in a directory called Repository.)</p>
                    <div class="notification">
                        php bin/console make:entity
                    </div>
                    <p class="ml-20">Follow the instructions on the terminal: (This can be done for all the fields that need to be in the class. The fields are also added to the database table if you use doctrine.)</p>
                    <ol>
                        <li class="ml-40">Name of the class (will be used to create the database allso wif you use Doctrine)</li>
                        <li class="ml-40">Property name</li>
                        <li class="ml-40">Field type (Type ? to see a list of all field types)</li>
                        <li class="ml-40">Field length</li>
                        <li class="ml-40">Nullable</li>
                    </ol>
                </div>
            </div>

            <div class="heading-box">
                <h3 class="title is-3" id="twig"><strong>Twig</strong></h3>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <h5 class="title is-5">Twig Extensions</h5>
            <div class="section-content">
                <div class="content">
                    <p>Create a twig Extension using the maker-bundle:</p>
                    <div class="notification">
                        php bin/console make:twig-extension
                    </div>
                    <p>Create a twig Extension using the maker-bundle:</p>
                    <div class="notification">
                        php bin/console make:twig-extension
                    </div>
                    <p>The command generates a standard PHP class placed in the directory Twig that allows us to extend the filters that Twig provides. If we stick to one class, we can use the suggested class name 'AppExtension'.</p>
                    <div class="message is-black">
                        <div class="message-header">
                            Example: Twig Extension - content to Uppercase
                        </div>
                        <div class="message-body is-family-code">
                            namespace App\Twig;<br><br>
                            use Twig\Extension\AbstractExtension;<br>
                            use Twig\TwigFilter;<br>
                            use Twig\TwigFunction;<br><br>

                            class AppExtension extends AbstractExtension { <br>
                            <br>

                            <span class="ml-20"> public function getFilters() : array {</span> <br>
                            <span class="ml-40">return [</span><br>
                            <span class="ml-60">new TwigFilter('uppercase', [$this, 'processMarkdown'], ['is_safe' => ['html']]),</span><br>
                            <span class="ml-40"> ];</span><br><br>

                            <span class="ml-40">public function processMarkdown($value) {</span> <br>
                            <span class="ml-60">return strtoupper($value);</span><br>
                            <span class="ml-40">}</span><br><br>
                            }
                        </div>
                    </div>
                    <p>This alows us to use the filter named 'uppercase' in our Twig-files like this</p>
                    <div class="notification">
                        {{ person.name|uppercase }}
                    </div>
                    <p>This filter now returns the name of the person in UPPERCASE. The first argument being passed to the function 'cached_markdown'/'processMarkdown' is always the content on the left side of the pipe (|) in the twig-template. </p>
                </div>
            </div>
            <div class="heading-box">
                <h3 class="title is-3" id="services"><strong>Service</strong></h3>
                <button class="copy" data-tooltip="Copy the link to this section."><i class="fas fa-copy"></i></button>
            </div>
            <div class="section-content">
                <div class="content">
                    <p>More to come!</p>
                </div>
            </div>
            <h5 class="title is-5">Service Subscriber</h5>
            <div class="section-content">
                <div class="content">
                    <p>To avoid a performance hit we should use Service Subscriber in these 3 cases</p>
                    <ol>
                        <li class="ml-20">Twig extensions</li>
                        <li class="ml-20">Event Subscribers</li>
                        <li class="ml-20">Security Voters</li>
                    </ol>
                    <div class="message is-black">
                        <div class="message-header">
                            Example: Twig Extension with a service subscriber
                        </div>
                        <div class="message-body is-family-code">
                            namespace App\Twig;<br><br>
                            use App\Service\MarkdownHelper;<br>
                            use Twig\Extension\RuntimeExtensionInterface;<br><br>

                            class AppRuntime implements RuntimeExtensionInterface{ <br>
                            <br>
                            <span class="ml-20">private $markdownHelper;</span> <br> <br>

                            <span class="ml-20">public function __construct(MarkdownHelper $markdownHelper) {</span> <br>
                            <span class="ml-40">$this->markdownHelper = $markdownHelper;</span><br>
                            <span class="ml-20">}</span><br>
                            <br>
                            <span class="ml-20">public function processMarkdown($value) {</span> <br>
                            <span class="ml-40">return $this->markdownHelper->parse($value);</span><br>
                            <span class="ml-20">}</span><br>

                            }

                            <br>
                            <br>

                            namespace App\Twig;<br><br>
                            use Twig\Extension\AbstractExtension;<br>
                            use Twig\TwigFilter;<br><br>

                            class AppExtension extends AbstractExtension { <br>
                            <br>

                            <span class="ml-20"> public function getFilters() : array {</span> <br>
                            <span class="ml-40">return [</span><br>
                            <span class="ml-60">new TwigFilter('cached_markdown', [AppRuntime::class, 'processMarkdown'], ['is_safe' => ['html']]),</span><br>
                            <span class="ml-40"> ];</span><br><br>

                            }
                        </div>
                    </div>
                    <p class="ml-20">
                        The 'normal' way of injecting the MarkdownHelper Service would be in the constructor in the AppExtention Class. Symfony instantiates the MarkdownHelper every time a Twig-Template gets rendered, even if the Twig-Template is not using the filter, that uses the MardownHelper.
                        Therefore we should use a service subscriber as shown in the example above, there the MarkdownHelper is now only instantiated when a twig template that used the filter cached_markdown is rendered. </p>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer has-background-primary">
        <div class="content has-text-centered">
            <p class="has-text-white is-pulled-right">
                <a class="has-text-white" href="legalnotice.html">Legal Notice and Privacy Policy</a>
            </p>
        </div>
    </footer>
</main>
<script src="./base.js"></script>
</body>

</html>